<link rel="stylesheet" href="./markdown_style.css">

# 笔记

- [笔记](#笔记)
- [循环](#循环)
  - [for 循环](#for-循环)
    - [语法](#语法)
  - [break 和 continue](#break-和-continue)
- [函数](#函数)
  - [函数的声明](#函数的声明)
    - [一般方式](#一般方式)
    - [函数表达式（匿名函数）](#函数表达式-匿名函数)
  - [参数](#参数)
    - [构造函数](#构造函数)
  - [调用函数](#调用函数)
  - [返回值](#返回值)
  - [函数 arguments](#函数-arguments)
- [数组](#数组)
  - [多维数组](#多维数组)
    - [二维数组](#二维数组)
    - [三维数组](#三维数组)
  - [关联数组](#关联数组)
    - [添加属性](#添加属性)
- [对象](#对象)
  - [对象成员](#对象成员)
  - [对象结构](#对象结构)
  - [对象方法](#对象方法)
- [this](#this)
  - [修改指向](#修改指向)
    - [call](#call)
    - [apply](#apply)
    - [bind](#bind)
- [包装类型对象](#包装类型对象)
  - [字符串](#字符串)
    - [API](#api)
    - [字符串模板解析](#字符串模板解析)
- [Date](#date)
  - [获取](#获取)
    - [获取年份](#获取年份)
    - [获取距离1900年的年份](#获取距离1900年的年份)
    - [获取月份（0 - 11）](#获取月份-0-11)
    - [获取日](#获取日)
    - [获取星期（0-6）](#获取星期-0-6)
    - [获取时（0 - 23）](#获取时-0-23)
    - [获取分](#获取分)
    - [获取秒](#获取秒)
    - [获取毫秒](#获取毫秒)
    - [时间戳](#时间戳)
  - [设置](#设置)
- [Math](#math)
  - [常量](#常量)
    - [圆周率](#圆周率)
    - [自然数 e](#自然数-e)
  - [常用静态方法（只能由 Math 对象调用）](#常用静态方法-只能由-math-对象调用)
    - [向下取整](#向下取整)
    - [向上取整](#向上取整)
    - [去除小数位](#去除小数位)
    - [随机数](#随机数)
    - [获取一组数中的最大值](#获取一组数中的最大值)
    - [获取一组数中的最小值](#获取一组数中的最小值)
    - [计算一个数的幂](#计算一个数的幂)
    - [算术平方根](#算术平方根)
    - [三角函数（度数是弧度）](#三角函数-度数是弧度)
      - [正弦](#正弦)
      - [余弦](#余弦)
      - [正切](#正切)
    - [四舍五入](#四舍五入)
    - [绝对值](#绝对值)
- [DOM](#dom)
  - [注意事项](#注意事项)
  - [获取节点](#获取节点)
    - [通过 id 获取节点](#通过-id-获取节点)
    - [通过类名（class）获取节点](#通过类名-class-获取节点)
    - [通过标签名称获取节点](#通过标签名称获取节点)
    - [通过 name 属性获取节点](#通过-name-属性获取节点)
    - [通过 CSS 选择器获取节点](#通过-css-选择器获取节点)
    - [获取父节点](#获取父节点)
  - [节点内容操作](#节点内容操作)
    - [文本内容](#文本内容)
    - [标签内容](#标签内容)
    - [表单标签内容](#表单标签内容)
  - [表单控件](#表单控件)
  - [节点样式](#节点样式)
  - [节点属性](#节点属性)
    - [获取属性](#获取属性)
    - [修改属性](#修改属性)
    - [移除属性](#移除属性)
    - [所有标签的六大公共属性](#所有标签的六大公共属性)
    - [自定义属性（data-*）](#自定义属性-data)
      - [获取](#获取-1)
      - [修改或新增](#修改或新增)
  - [关系节点](#关系节点)
    - [父子关系](#父子关系)
      - [获取父节点](#获取父节点-1)
      - [获取父元素的子节点](#获取父元素的子节点)
    - [同胞关系](#同胞关系)
      - [上一个节点（文本、元素、其他）](#上一个节点-文本-元素-其他)
      - [上一个元素节点](#上一个元素节点)
      - [下一个节点（文本、元素、其他）](#下一个节点-文本-元素-其他)
      - [下一个元素节点](#下一个元素节点)
    - [其他关系](#其他关系)
  - [节点操作](#节点操作)
    - [创建节点](#创建节点)
      - [创建](#创建)
      - [添加](#添加)
      - [插入节点](#插入节点)
    - [删除节点](#删除节点)
    - [替换节点](#替换节点)
  - [事件编程](#事件编程)
    - [注意](#注意)
    - [事件类型](#事件类型)
    - [事件监听](#事件监听)
      - [添加](#添加-1)
      - [移除](#移除)
    - [事件触发](#事件触发)
      - [捕获触发](#捕获触发)
      - [冒泡触发](#冒泡触发)
      - [阻止冒泡](#阻止冒泡)
      - [阻止浏览器默认行为](#阻止浏览器默认行为)
- [定时器](#定时器)
  - [一次性定时器](#一次性定时器)
  - [无限次定时器](#无限次定时器)
- [BOM](#bom)
  - [location](#location)
    - [完整的路径](#完整的路径)
    - [跳转](#跳转)
    - [刷新页面](#刷新页面)
  - [history](#history)
  - [screen](#screen)
    - [获取屏幕分辨率](#获取屏幕分辨率)
- [正则表达式](#正则表达式)
  - [正则表达式语法](#正则表达式语法)
  - [创建固定正则表达式](#创建固定正则表达式)
  - [创建动态正则表达式](#创建动态正则表达式)
  - [预定义模式](#预定义模式)
    - [匹配数字](#匹配数字)
    - [匹配汉字](#匹配汉字)
    - [匹配数字、字母、下划线](#匹配数字-字母-下划线)
    - [匹配空白符](#匹配空白符)
    - [匹配单词边界](#匹配单词边界)
    - [取反](#取反)
    - [匹配非数字](#匹配非数字)
    - [匹配非数字、字母、下划线](#匹配非数字-字母-下划线)
    - [匹配非空白符](#匹配非空白符)
    - [匹配非单词边界](#匹配非单词边界)
    - [匹配除换行符（\n、\r）以外的其他字符](#匹配除换行符-n-r-以外的其他字符)
  - [量词符](#量词符)
    - [?](#)
    - [*](#ul-li-li-ul)
    - [+](#ul-li-li-ul-1)
    - [{m, n}](#m-n)
    - [^（在正则表达式最前方时）](#在正则表达式最前方时)
    - [$](#-1)
      - [(?=x)](#x)
      - [(?|x)](#x-1)
  - [()](#-2)
  - [|](#-3)
  - [修饰符](#修饰符)
  - [贪婪模式](#贪婪模式)
  - [懒惰模式](#懒惰模式)
  - [转义](#转义)
  - [方法](#方法)
    - [修改正则](#修改正则)
    - [查询匹配正则的字符串](#查询匹配正则的字符串)
      - [无组名](#无组名)
      - [有组名](#有组名)
  - [支持正则表达式的字符串方法](#支持正则表达式的字符串方法)
    - [match()](#match)
    - [replace()](#replace)
    - [search()](#search)
    - [split()](#split)
- [JSON](#json)
  - [JSON 数据格式要求](#json-数据格式要求)
  - [方法](#方法-1)
    - [将数组或对象序列化（转换）为 JSON 字符串](#将数组或对象序列化-转换-为-json-字符串)
    - [将 JSON 反序列化（转换）为数组或对象](#将-json-反序列化-转换-为数组或对象)
- [闭包](#闭包)
  - [创建闭包](#创建闭包)
    - [步骤](#步骤)
    - [例子](#例子)
- [高阶函数](#高阶函数)
  - [条件（满足其中一条即可）](#条件-满足其中一条即可)
  - [应用](#应用)
    - [柯里化（部分求值）](#柯里化-部分求值)
- [对象自定义属性](#对象自定义属性)
    - [添加自定义属性](#添加自定义属性)
    - [添加多个自定义属性](#添加多个自定义属性)
    - [获取对象可遍历的属性（键名）](#获取对象可遍历的属性-键名)
    - [获取对象可遍历和不可遍历的属性（键名）](#获取对象可遍历和不可遍历的属性-键名)
    - [获取对象指定属性的属性配置](#获取对象指定属性的属性配置)
    - [获取对象所有属性的属性配置](#获取对象所有属性的属性配置)
- [对象的三大状态](#对象的三大状态)
  - [防扩展](#防扩展)
    - [设置](#设置-1)
    - [判断](#判断)
  - [密封](#密封)
    - [设置](#设置-2)
    - [判断](#判断-1)
  - [冻结](#冻结)
    - [设置](#设置-3)
    - [判断](#判断-2)

# 循环

## for 循环

### 语法

- `for (初始条件值; 条件; 修改条件初始值) { }`

## break 和 continue

- break：打断循环
- continue：跳过本轮循环，直接进入下一轮循环

# 函数

> 一段可重复调用的代码块
> 函数具有函数作用域（局部作用域）
> > 作用域：变量的有效范围

## 函数的声明

### 一般方式

> 本方式的声明会提前

```javascript
function 函数名(参数) {
    // 函数体
}
```

### 函数表达式（匿名函数）

```javascript
var fn = function (参数) {
    // 函数体
}
fn();
```

## 参数

> 当函数某些东西不确定时，可以使用参数来表示

- 形参：形式参数，在函数定义时传递的参数
- 实参：实际参数，在函数调用时传递的参数

### 构造函数

- `var fn = new Function();`

## 调用函数

- `函数名(参数);`

## 返回值

- `return`（只有函数有）

## 函数 arguments

> 实际参数对象

- 只能在函数内部使用
- 当形参个数不确定时使用
- arguments 对象是一个 `类数组` 对象（长得像数组但不是数组）
- `arguments.callee(参数)`：函数自身，相当于 `函数名(参数)`

# 数组

> 一组变量集合

## 多维数组

### 二维数组

```javascript
var arr = [
    [元素1, 元素2, ...],
    [元素1, 元素2, ...]
];
```

### 三维数组

```javascript
var arr = [
    [
        [元素1, 元素2, ...],
        [元素1, 元素2, ...]
    ],
    [
        [元素1, 元素2, ...],
        [元素1, 元素2, ...]
    ]
];
```

## 关联数组

- 组成：`key - value`（键值对）
- length 为 0（无效）
- 获取不存在的键名，返回 `undefined`

### 添加属性

- 通过 `点` 语法添加固定属性名称
- 通过 `[]` 方式添加动态键名

# 对象

> 一组无序属性集合

## 对象成员

- 属性
- 方法

## 对象结构

> 键值对 key:value

```javascript
{
    属性名1: 值1,
    属性名2: 值2,
    ...
}
```

## 对象方法

- 移除属性：`delete 对象.属性名`

# this

> 值随时执行当前使用对象

## 修改指向

> 修改方法的执行环境

### call

- `call(修改的 this, 函数参数1, 函数参数2, ...)`

### apply

- `apply(修改的 this, [函数参数1, 函数参数2, ...])`

### bind

> 返回绑定 this 后的函数，不会立即执行函数。

- `bind(修改的 this, 函数参数1, 函数参数2, ...)`

# 包装类型对象

- 数值（Number）
- 布尔（Boolean）
- 字符串（String）

## 字符串

### API

- `charCodeAt()`：将指定位置（默认 0）的字符转成 Unicode
- `String.fromCharCode()`：将 Unicode 转换为字符（静态方法）
- `slice(m, n)`：截取字符串
  > m：开始截取的下标
  > n：结束截取的下标（实际：n - 1）
  > 省略 n，取 m 后所有字符
  > 下标可用负数
- `substring(m, n)`：字符串截取
  > m：开始截取的下标
  > n：结束截取的下标（实际：n - 1）
  > 省略 n，取 m 后所有字符
  > 下标不可用负数
- `substr(m, n)`：字符串截取
  > m：开始截取的下标
  > n：截取的字符个数
  > 用法和数组的 splice() 方法相同
  > 下标可用负数
- `concat()`：拼接字符串
- `toUpperCase()`：转换为大写
- `toLowerCase()`：转换为小写
- `charAt(下标)`：获取字符串指定位置的字符
- `indexOf(m, n)`：从开始位置查找字符
  > m：查找的字符
  > n：开始查找的位置（默认 0）
- `lastIndexOf(m, n)`：从末尾开始查找字符
  > m：查找的字符
  > n：开始查找的位置（默认 0）
- `split(分隔符)`：切割字符串，返回一个数组
- `trim()`：去除字符串左右空格

### 字符串模板解析

```javascript
var str1 = 'a';
var str2 = 'b';
var str3 = `${str1}${str2}`;
console.log(str3); // 'ab'
```

# Date

> Date 对象用于处理日期和时间。
> 可以通过 new 关键词来定义 Date 对象。
> `var today = new Date()`

## 获取

### 获取年份

- `today.getFullYear()`

### 获取距离1900年的年份

- `today.getYear()`

### 获取月份（0 - 11）

- `today.getMonth()`

### 获取日

- `today.getDate()`

### 获取星期（0-6）

> 星期日为 `0`，星期一为 `1`

- `today.getDay()`

### 获取时（0 - 23）

- `today.getHours()`

### 获取分

- `today.getMinutes()`

### 获取秒

- `today.getSeconds()`

### 获取毫秒

- `today.getMilliseconds()`

### 时间戳

> 距离 1970-01-01 00:00:00 的毫秒数
> 一般用于唯一标志

- `today.getTime()`

## 设置

> `星期` 由时间自动推断，不能设置。

- `setFullYear()`
- `setMonth()`
- `setDate()`
- `setHours()`
- `setMinutes()`
- `setSeconds()`

# Math

> JavaScript 内置对象
> `Math` 不是构造函数，不能被 `new`。

## 常量

### 圆周率

- `Math.PI`

### 自然数 e

- `Math.E`

## 常用静态方法（只能由 Math 对象调用）

### 向下取整

- `Math.floor()`

### 向上取整

- `Math.ceil()`

### 去除小数位

- `Math.trunc()`

### 随机数

> 范围：[0, 1)

- `Math.random()`

### 获取一组数中的最大值

- `Math.max()`

### 获取一组数中的最小值

- `Math.min()`

### 计算一个数的幂

- `Math.pow(底数, 幂)`

### 算术平方根

- `Math.sqrt()`

### 三角函数（度数是弧度）

#### 正弦

- `Math.sin()`

#### 余弦

- `Math.cos()`

#### 正切

- `Math.tan()`

### 四舍五入

- `Math.round()`

### 绝对值

- `Math.abs()`

# DOM

> DOM：文档对象模型（Document Object Model）

## 注意事项

- 当页面加载完成后执行 `document.write()`，会将页面 `body` 中的内容全部替换。
- `节点列表` 是 `类数组对象`，不是数组。

## 获取节点

### 通过 id 获取节点

> 返回一个原生 DOM 元素（标签）

- `document.getElementById()`

### 通过类名（class）获取节点

> 返回节点列表

- `document.getElementsByClassName()`

### 通过标签名称获取节点

> 返回节点列表

- `document.getElementsByTagName()`

### 通过 name 属性获取节点

> 返回节点列表

- `document.getElementsByName()`

### 通过 CSS 选择器获取节点

- `document.querySelector()`

> 返回获取到的第一个原生 DOM 元素

- `document.querySelectorAll()`

> 返回节点列表

### 获取父节点

- `.parentNode`

## 节点内容操作

### 文本内容

- ~~`.innerText`~~
- `.textContent`

### 标签内容

- `.innerHTML`

### 表单标签内容

> input、textarea

- `.value`

## 表单控件

## 节点样式

- `DOM节点.style.CSS属性 = 属性值`

  > `CSS属性` 不能使用 `-`，要变为大小写。
  > 例如：`font-size` -> `style.fontSize`

- `DOM节点.className = 类名`
- `getComputedStyle(DOM节点).CSS属性`

  > 获取计算样式（只读），字符串

## 节点属性

### 获取属性

- `DOM节点.getAttribute(标签属性名)`

### 修改属性

- `DOM节点.setAttribute(标签属性名, 属性值)`

### 移除属性

- `DOM节点.removeAttribute(标签属性名)`

### 所有标签的六大公共属性

- `class`
- `data-*`（自定义属性）
- `id`
- `name`
- `style`
- `title`

### 自定义属性（data-*）

#### 获取

- `DOM节点.dataset.自定义属性名`;

#### 修改或新增

- `DOM节点.dataset.自定义属性名 = 属性值`;

## 关系节点

### 父子关系

#### 获取父节点

- `DOM节点.parentNode`
- `DOM节点.parentElement`

#### 获取父元素的子节点

- `DOM节点.childNodes`
- `DOM节点.children`

### 同胞关系

#### 上一个节点（文本、元素、其他）

- `DOM节点.previousSibling`

#### 上一个元素节点

- `DOM节点.previousElementSibling`

#### 下一个节点（文本、元素、其他）

- `DOM节点.nextSibling`

#### 下一个元素节点

- `DOM节点.nextElementSibling`

### 其他关系

## 节点操作

### 创建节点

#### 创建

- `document.createElement(标签名)`

#### 添加

- `DOM节点.appendChild(创建的节点)`

  > 将 `创建的节点` 添加到 `DOM节点` 中

#### 插入节点

- `DOM节点.insertBefore(新节点, 已有节点);`

  > 将 `新节点` 插入到 `已有节点` 前

- `DOM节点.insertAfter(新节点, 已有节点);`

  > 将 `新节点` 插入到 `已有节点` 后

### 删除节点

- `DOM节点.remove()`：移除自身
- `DOM节点.removeChild()`：移除子节点

### 替换节点

- `DOM节点.replaceChild(新节点, 旧节点)`

## 事件编程

### 注意

- 任何事件的回调函数都有一个事件对象参数

  ```javascript
  DOM节点.onclick = function (e) {
      console.log('事件对象', e);
  }
  ```

### 事件类型

- `change`：域内容发生改变
- `click`：点击
  - 获取相对于页面的鼠标坐标
    - `事件对象.pageX`
    - `事件对象.pageY`
  - 获取相对于绑定事件的元素的鼠标坐标
    - `事件对象.offsetX`
    - `事件对象.offsetY`
  - 获取绑定事件的元素的偏移距离
    - `this.offsetLeft`
    - `this.offsetTop`
  - 获取当前点击的目标元素
    - `事件对象.target`
- `dblclick`：双击
- `input`：输入
- `focus`：获得焦点
- `blur`：失去焦点
- `mouseover`：鼠标进入
- `onmouseout`：鼠标离开
- `onmouseenter`：鼠标进入
- `mouseleave`：鼠标离开
- `mousemove`：鼠标移动
- `onmousedown`：鼠标按下
  - `事件对象.button`：按下的键（0：左键，1：中键，2：右键）
- `onmouseup`：鼠标松开
- `oncontextmenu`：右键菜单

### 事件监听

#### 添加

- `addEventListener(事件类型, 事件执行的回调函数, 是否为捕获阶段触发)`

#### 移除

- `removeEventListener()`

### 事件触发

> 事件触发只能在一个阶段触发（捕获阶段 / 冒泡阶段）。
> 先捕获触发，再冒泡触发。
> 默认情况下，事件是冒泡触发的。

#### 捕获触发

- 从根元素开始，到目标元素终止（从外到内）。

> 目标元素：触发事件的元素

#### 冒泡触发

- 从目标元素开始，到根元素终止（从内到外）。

#### 阻止冒泡

> `事件对象.stopPropagation()`

#### 阻止浏览器默认行为

> `事件对象.preventDefault()`

# 定时器

> 定时器函数都是 `异步任务`
> `异步任务` 在所有 `同步任务` 执行完毕后再执行

## 一次性定时器

> `setTimeout()`

## 无限次定时器

> `setInterval()`

# BOM

> BOM (Browser Object Model)

## location

> 定位
> BOM (Browser Object Model)

### 完整的路径

- `协议://主机:端口/文件夹/文件?查询参数1&参数2&...#锚点`

### 跳转

- `location.href = 目标路径`：可返回
- `location.assign(目标路径)`：可返回
- `location.replace(目标路径)`：替换当前，不可返回

### 刷新页面

- `location.reload(目标路径);`

## history

- `history.go(n)`

> n 为整数
> n < 0：返回上级
> n = 0：刷新页面
> n > 0：前进

## screen

### 获取屏幕分辨率

- `screen.height`：高度
- `screen.width`：宽度
- `screen.availHeight`：可用高度（不包括 Windows 任务栏）
- `screen.availWidth`：可用宽度（不包括 Windows 任务栏）

# 正则表达式

> 一种文本匹配模式，通常用于表单验证。

## 正则表达式语法

- `/匹配模式/`

## 创建固定正则表达式

```javascript
var reg = /匹配模式/;
```

## 创建动态正则表达式

```javascript
var m = '匹配模式';
var n = '修饰符';
var reg = new RegExp(m, n);
```

## 预定义模式

> `[]`：字符集
> 若在 `字符集` 内没有量词控制，只需要匹配 `字符集` 其中一个字符。

### 匹配数字

- `[0123456789]`
- `[0-9]`
- `\d`

### 匹配汉字

- `[\u4e00-\u9fa5]`

### 匹配数字、字母、下划线

- `[0-9A-Za-z_]`
- `\w`

### 匹配空白符

- `[ \n\r\t\v\f]`
- `\s`

### 匹配单词边界

- `\b`

> 单词一般以空格等为边界（也可以为其他符号）
> 例如：`\btest` 匹配 `This is a test.` 中的 `test`（不带空格）

### 取反

- `^`（脱字符，在 `字符集` 内时）

### 匹配非数字

- `[^0123456789]`
- `[^0-9]`
- `\D`

### 匹配非数字、字母、下划线

- `[^0-9A-Za-z_]`
- `\W`

### 匹配非空白符

- `[^ \n\r\t\v\f]`
- `\S`

### 匹配非单词边界

- `\B`

### 匹配除换行符（\n、\r）以外的其他字符

- `.`

## 量词符

### ?

- `?` 前方字符至多存在一个（<= 1）
- 可有可无，若有，则只有一个。

### *

- `*` 前方字符可有无限个（>= 0）
- 可有可无，若有，则可有无限个。

### +

- `+` 前方字符至少存在一个（> 0）
- 可有一个或无限个。

### {m, n}

- `{m, n}` 前方的字符至少存在 `m` 个，至多存在 `n` 个。
- `n` 可省略，表示必须存在 `m` 个。

### ^（在正则表达式最前方时）

- 开头匹配
- 文本必须以 `^` 后方内容开头

### $

- 结尾匹配
- 文本必须以 `^$` 前方内容开头

#### (?=x)

- `x` 为任意内容（例如：`(?=a)`、`(?=[A-Z])`）
- 匹配 `(?=x)` 前方字符串后紧跟 `x` 的内容
- 例如：`test(?=a)` 匹配 `testabcd` 中的 `test`

#### (?|x)

- `x` 为任意内容（例如：`(?|a)`、`(?|[A-Z])`）
- 匹配 `(?|x)` 前方字符串后不跟 `x` 的内容
- 例如：`test(?|e)` 匹配 `testabcd` 中的 `test`

## ()

- 组
- 如果匹配成功，可以获取 `组` 匹配的内容（获取匹配的第 n 个内容：`RegExp.$n`）

## |

- 或

## 修饰符

- `i`：忽略大小写
- `m`：多行匹配
- `g`：全局匹配

## 贪婪模式

> `x` 为任意内容

- `x.*`：匹配 `x` 和 `x` 后方任意内容（`x` 后方可以没有内容）
- `x.+`：匹配 `x` 和 `x` 后方任意内容（`x` 后方至少有一个字符）

## 懒惰模式

> `x` 为任意内容

- `x.*?`：匹配 `x`
- `x.+?`：匹配 `x` 后方一个字符

## 转义

- 在需要转义的字符前添加 `\` 进行转义，例如：`\.`

## 方法

### 修改正则

```javascript
var reg = /匹配模式/修饰符;
reg.compile(匹配模式, 修饰符);
```

### 查询匹配正则的字符串

> 成功：返回一个数组
> 不成功：返回 `null`

#### 无组名

```javascript
var reg = /匹配模式/修饰符;
var str = 字符串;
reg.exec(str);
```

#### 有组名

```javascript
var reg = /(?<组名>匹配模式)/修饰符;
var str = 字符串;
reg.exec(str);
```

## 支持正则表达式的字符串方法

### match()

- 匹配字符（类似正则表达式的 `exec`）
- 找到：返回一个数组
- 找不到：返回 `null`

### replace()

- 替换字符串
- `字符串.replace(被替换的内容, 新内容)`
- 返回替换后的字符串

### search()

- 查找字符
- 找到：返回字符下标
- 找不到：返回 `-1`

### split()

- 切割字符串
- 返回一个数组

# JSON

> 一种数据文本交换格式，一般用于前后端交互。
> JavaScript 对象使用模式
> 特点：体积小、传输较快、便于阅读

## JSON 数据格式要求

- 键名、字符串必须使用双引号（`""`）包括
- 值支持的数据类型：`字符串`、`数字`、`对象`（JSON 对象）、`数组`、`布尔`、`Null`

## 方法

### 将数组或对象序列化（转换）为 JSON 字符串

- `JSON.stringify(value[, replacer[, space]])`

  > **value**（必需）
  >
  > 要转换的 JavaScript 值（通常为对象或数组）
  > 
  > **replacer**（可选）
  >
  > 用于转换结果的函数或数组
  > 如果 `replacer` 为函数，则 `JSON.stringify` 将调用该函数，并传入每个成员的键和值。
  > 使用返回值而不是原始值。如果此函数返回 `undefined`，则排除成员。根对象的键是一个空字符串：`""`。
  > 如果 `replacer` 是一个数组，则仅转换该数组中具有键值的成员。成员的转换顺序与键在数组中的顺序一样。
  > 
  > **space**（可选）
  >
  > 文本添加缩进、空格和换行符
  > 如果 `space` 是一个数字，则返回值文本在每个级别缩进指定数目的空格。
  > 如果 `space` 大于 10，则文本缩进 10 个空格。`space` 也可以使用非数字，如：`\t`。
  >
  > **注意**
  >
  > 与 `.toString()` 不同，本方法转换后会保留原结构。

### 将 JSON 反序列化（转换）为数组或对象

- `JSON.parse(JSON 字符串)`

> JSON 格式必须正确，否则会报错。

# 闭包

> 一个有权访问函数局部变量的函数
> 一般情况下，函数的局部变量会随着函数调用完毕销毁（`闭包` 例外）。
> 闭包可避免全局污染，变量可以受保护。
> 每次调用 `外层函数` 都会产生受保护的局部变量的副本

## 创建闭包

### 步骤

1. 使用 `外层函数` 声明一个或多个受保护的 `局部变量`
2. 在 `外层函数` 内部声明一个 `内层函数`，`内层函数` 操作 `外层函数` 中受保护的 `局部变量`
3. `外层函数` 将 `内层函数` 返回（`return`）到外部（保存）
4. `内层函数` 在外部被反复调用

### 例子

```javascript
function fnOut() {
    // 受保护的变量
    // 函数 fnOut() 调用完成后不被销毁
    var n = 1;

    // 内层函数
    // 函数 fnOut() 调用完成后被销毁
    function fnIn() {
        n++;
        console.log('n ==>', n);
    }

    return fnIn;
}

// 调用 fnOut() 函数，fnOut() 返回一个内层函数 fnIn()
var func = fnOut(); // 引用

console.log('func ==>', func);

// 访问 fnOut() 的私有变量 n
func(); // n ==> 2
func(); // n ==> 3
```

# 高阶函数

## 条件（满足其中一条即可）

- 函数可以作为函数的参数传递
- 函数可以作为函数的返回值输出（例如 `闭包`）

## 应用

### 柯里化（部分求值）

- 首先接受一些参数，并没有真正求值，而是将参数记录。
- 等待需要求值时（例如不传递参数时），再将所有参数的最终结果返回。

# 对象自定义属性

### 添加自定义属性

- `Object.defineProperty(原对象, 属性名称, 属性配置)`

  > 定义后的属性默认不能被修改、删除、遍历
  > 属性配置添加 `writable: true` 后可修改
  > 属性配置添加 `configurable: true` 后可删除
  > 属性配置添加 `enumerable: true` 后可遍历

  ```javascript
  Object.defineProperty(原对象, 属性名称, {
      value: '',           // 值
      writable: false,     // 修改
      configurable: false, // 配置（删除）
      enumerable: false    // 枚举（遍历）
  });
  ```

### 添加多个自定义属性

- `Object.defineProperties(原对象, 属性集合)`

  ```javascript
  Object.defineProperties(原对象, {
      属性名称: {
          value: '',           // 值
          writable: false,     // 修改
          configurable: false, // 配置（删除）
          enumerable: false    // 枚举（遍历）
      },
      属性名称: {
          value: '',           // 值
          writable: false,     // 修改
          configurable: false, // 配置（删除）
          enumerable: false    // 枚举（遍历）
      }
  });
  ```

### 获取对象可遍历的属性（键名）

- `Object.keys(对象)`

  > 返回一个数组

### 获取对象可遍历和不可遍历的属性（键名）

- `Object.getOwnPropertyNames(对象)`

  > 返回一个数组

### 获取对象指定属性的属性配置

- `Object.getOwnPropertyDescriptor(对象, 属性)`

### 获取对象所有属性的属性配置

- `Object.getOwnPropertyDescriptors(对象)`

# 对象的三大状态

## 防扩展

> 不能添加属性，可删除属性，可修改属性

### 设置

- `Object.preventExtensions(对象)`

### 判断

- `Object.isExtensible(对象)`

  > 返回布尔值

## 密封

> 不能添加、删除属性，可修改属性

### 设置

- `Object.seal(对象)`

### 判断

- `Object.isSealed(对象)`

  > 返回布尔值

## 冻结

> 不能添加、删除、修改属性

### 设置

- `Object.freeze(对象)`

### 判断

- `Object.isFrozen(对象)`

  > 返回布尔值
